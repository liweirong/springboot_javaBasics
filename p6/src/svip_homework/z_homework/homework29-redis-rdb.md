什么是缓存雪崩、缓存穿透、缓存击穿？你怎么解决？（语音作业）<br>
什么是缓存数据一致性问题?怎么解决的？（语音作业）<br>
说说Redis的哈希槽概念（语音作业）<br>
redis实现分布式锁，如果锁到期了，业务没有处理完怎么解决？（语音作业）<br>

什么是缓存雪崩、缓存穿透、缓存击穿？你怎么解决？（语音作业）<br>

```text
缓存雪崩：很大一批数据设置的时间同时过期，同时又有这一批数据的请求打进来，造成数据库压力过大甚至down机
    解决方案：
        1) 加互斥锁或者使用队列，针对同一个key只允许一个线程到数据库查询
        2）缓存定时预先更新，避免同时失效
        3）通过加随机数，不让key在同一时间过期
        4）设置热点数据永远不过期。
缓存穿透： 缓存穿透是指缓存和数据库中都没有的数据，但是用户一直请求不存在的数据！这时的用户很可能就是攻击者，恶意搞你们公司的，攻击会导致数据库压力过大。
  解决方案：
        1）布隆过滤器，位图里面只有0跟1，然后将访问的值通过多个不同的hash算法得到不同的值，放置在不同的位图标记为1，有误判，没法判断数据一定存在，但是能判断一定不存在！
        2）封IP
        3）接口层增加校验，如用户鉴权校验
        4）从缓存取不到的数据，在数据库中也没有取到，这时也可以将key-value对写为key-null，缓存有效时间可以设置短点，如30秒（设置太长会导致正常情况也没法使用）。
        这样可以防止攻击用户反复用同一个id暴力攻击
缓存击穿：单个key过期的时候有大量并发，造成数据库压力过大甚至down机
        1）设置热点数据永远不过期

```

什么是缓存数据一致性问题?怎么解决的？（语音作业）<br>

```text
什么是缓存数据一致性问题?
在并发环境下，可能会导致redis跟DB的数据产生不一致

一般这种情况解决不了，有很多人提到延时双删，但是在并发的时候还是会出现一致性的问题
redis本身就注重缓存，并不像mysql一样注重和磁盘数据比较，就是无法解决，
采用的最终一致性，设置超时时间进行定时清除，可能会有一段时间的不一致

```

说说Redis的哈希槽概念（语音作业）<br>

```text
redis集群进行数据的分片的时候，数据如何路由
 普通的方法有
    取模 - 集群大小变化的时候几乎所有的数据都会进行重新分布
    一致性hash - 只会影响一部分数据，但是有个问题，如果节点在hash换上分布不均匀那么数据也是分布不均匀的
在cluster集群的模式下，redis采用的是hash槽的概念，把数据最终放在16384个hash槽上，每台设备负责一段数据，当然也是可以配置的，在进行扩容的时候
没那么多节点，我就变成虚拟槽 Redis创建了16384个槽（slot），每个节点负责一定区间的slot
```

redis实现分布式锁，如果锁到期了，业务没有处理完怎么解决？（语音作业）<br>

```text
redisson提供的可重入锁中存在一个看门狗，在业务线程存在的时候每隔超时时间的三分之一进行一个重新赋值ttl，避免过期
会每过三分之一的过期时间定时去看是否存在，如果存在的化ttl时间再次重置，直到业务完成相关进程不存在才会真正的过期
```